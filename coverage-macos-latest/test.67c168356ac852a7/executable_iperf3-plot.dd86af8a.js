var data = {lines:[
{"lineNum":"    1","line":"#!/bin/sh"},
{"lineNum":"    2","line":""},
{"lineNum":"    3","line":"set -eu","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    4","line":""},
{"lineNum":"    5","line":"# #!/bin/bash"},
{"lineNum":"    6","line":""},
{"lineNum":"    7","line":"# set -euo pipefail"},
{"lineNum":"    8","line":""},
{"lineNum":"    9","line":"if [ $# -eq 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   10","line":"  echo >&2 \"Usage: perf <ip>\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   11","line":"  return 1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   12","line":"fi"},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"# format() {"},
{"lineNum":"   15","line":"#   local json=\"$1\""},
{"lineNum":"   16","line":"#   shift"},
{"lineNum":"   17","line":"#   jq \"$@\" <<<\"$json\" | sed -e \'s/\\./,/\' | numfmt --to=iec"},
{"lineNum":"   18","line":"# }"},
{"lineNum":"   19","line":""},
{"lineNum":"   20","line":"# main() {"},
{"lineNum":"   21","line":"#   local ip=\"$1\""},
{"lineNum":"   22","line":"#   shift"},
{"lineNum":"   23","line":"#   set -- iperf3 --client \"$ip\" --json \"$@\""},
{"lineNum":"   24","line":"#   echo >&2 \"Running: $*\""},
{"lineNum":"   25","line":"#   local json"},
{"lineNum":"   26","line":"#   json=\"$(\"$@\")\""},
{"lineNum":"   27","line":"#   if [ -z \"$json\" ]; then"},
{"lineNum":"   28","line":"#     echo >&2 \"Failed: $*\""},
{"lineNum":"   29","line":"#     return 1"},
{"lineNum":"   30","line":"#   fi"},
{"lineNum":"   31","line":"#   # format=\'\"\\(\"Down\")\\t\\(.end.sum_received.bits_per_second)\"\'"},
{"lineNum":"   32","line":"#   # jq \"$format\" <<<\"$json\""},
{"lineNum":"   33","line":"#   local down down_per_second up up_per_second"},
{"lineNum":"   34","line":"#   down=\"$(format \"$json\" .end.sum_received.bytes)\""},
{"lineNum":"   35","line":"#   down_per_second=\"$(format \"$json\" \".end.sum_received.bits_per_second\" <<<\"$json\")\""},
{"lineNum":"   36","line":"#   up=\"$(format \"$json\" \".end.sum_sent.bytes\" <<<\"$json\")\""},
{"lineNum":"   37","line":"#   up_per_second=\"$(format \"$json\" \".end.sum_sent.bits_per_second\" <<<\"$json\")\""},
{"lineNum":"   38","line":"#   echo -e \"Down\\t$down_per_second/s\\t$down\""},
{"lineNum":"   39","line":"#   echo -e \"Up\\t$up_per_second/s\\t$up\""},
{"lineNum":"   40","line":"# }"},
{"lineNum":"   41","line":""},
{"lineNum":"   42","line":"run_iperf3() {"},
{"lineNum":"   43","line":"  ip=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   44","line":"  shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   45","line":"  # https://users.aalto.fi/~tontti/posts/jq-and-human-readable-bytes/"},
{"lineNum":"   46","line":"  format=\'def bytes:","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   47","line":"  def _bytes(v; u):","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   48","line":"    if (u | length) == 1 or (u[0] == \"\" and v < 10000) or v < 1000 then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   49","line":"      \"\\(v *100 | round /100) \\(u[0])B\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   50","line":"    else"},
{"lineNum":"   51","line":"      _bytes(v/1000; u[1:])","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   52","line":"    end;","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   53","line":"  _bytes(.; \":k:M:G:T:P:E:Z:Y\" / \":\");","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   54","line":"  select(.event==\"interval\") | .data.sum.bits_per_second | \"\\(bytes)/s\"\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   55","line":"  # select(.event==\"interval\") | .data.sum.bits_per_second | \"\\(.)\\t\\(bytes)/s\""},
{"lineNum":"   56","line":"  printf \"Bits\\tBits per second\\n\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   57","line":"  iperf3 --client=\"$ip\" --json-stream \"$@\" |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   58","line":"    jq --compact-output --raw-output --unbuffered \"$format\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   59","line":"  # sed -e \'s# .B/s##g\'"},
{"lineNum":"   60","line":"}"},
{"lineNum":"   61","line":""},
{"lineNum":"   62","line":"main() {"},
{"lineNum":"   63","line":"  if [ $# -le 1 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   64","line":"    set -- \"$@\" --time=33","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   65","line":"  fi"},
{"lineNum":"   66","line":"  # if [ -t 1 ] && command -v incplot >/dev/null; then"},
{"lineNum":"   67","line":"  #   # brew install --cask InCom-0/incom/incplot"},
{"lineNum":"   68","line":"  #   run_iperf3 \"$@\" | incplot # --width 100 --height 10"},
{"lineNum":"   69","line":"  if [ -t 1 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   70","line":"    run_iperf3 \"$@\" | npx cli-plot # -w 100 -h 10","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   71","line":"  else"},
{"lineNum":"   72","line":"    run_iperf3 \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   73","line":"  fi"},
{"lineNum":"   74","line":"}"},
{"lineNum":"   75","line":""},
{"lineNum":"   76","line":"main \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "test", "date" : "2025-12-21 16:54:58", "instrumented" : 23, "covered" : 0,};
var merged_data = [];
