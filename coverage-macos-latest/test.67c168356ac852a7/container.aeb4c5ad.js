var data = {lines:[
{"lineNum":"    1","line":"#!/usr/bin/env bash"},
{"lineNum":"    2","line":"#MISE description=\"mise container\""},
{"lineNum":"    3","line":""},
{"lineNum":"    4","line":"# PROFILE=minimal mise container alpine up --build --detach"},
{"lineNum":"    5","line":"# PROFILE=minimal mise container alpine exec -it alpine-latest-minimal bash -i"},
{"lineNum":"    6","line":""},
{"lineNum":"    7","line":"# https://www.chezmoi.io/reference/commands/docker/"},
{"lineNum":"    8","line":""},
{"lineNum":"    9","line":"set -euxo pipefail","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   10","line":""},
{"lineNum":"   11","line":"# CHEZMOI_PROFILE=\"${CHEZMOI_PROFILE:-}\" # minimal"},
{"lineNum":"   12","line":"# EPHEMERAL=\"${EPHEMERAL:-false}\""},
{"lineNum":"   13","line":"# HEADLESS=\"${HEADLESS:-false}\""},
{"lineNum":"   14","line":""},
{"lineNum":"   15","line":"# PREFIX=\"${PREFIX:-}\" # termux prefix"},
{"lineNum":"   16","line":"PROVIDER=\"${PROVIDER:-podman}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   17","line":""},
{"lineNum":"   18","line":"tag_prefix=chezmoi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   19","line":""},
{"lineNum":"   20","line":"if [ $# -eq 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   21","line":"  echo >&2 \"Usage: container <name[:version]>\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   22","line":"  exit 1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   23","line":"fi"},
{"lineNum":"   24","line":""},
{"lineNum":"   25","line":"NAME=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   26","line":"shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   27","line":""},
{"lineNum":"   28","line":"container_status() {"},
{"lineNum":"   29","line":"  $PROVIDER container inspect --format \'{{.State.Status}}\' \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   30","line":"}"},
{"lineNum":"   31","line":""},
{"lineNum":"   32","line":"build_container() {"},
{"lineNum":"   33","line":"  name=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   34","line":"  shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   35","line":"  image_name=\"${name%:*}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   36","line":"  if [[ \"$name\" = *:* ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   37","line":"    image_version=\"${name#*:}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   38","line":"  else"},
{"lineNum":"   39","line":"    image_version=latest","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   40","line":"  fi"},
{"lineNum":"   41","line":"  container=\"$tag_prefix-$image_name-$image_version\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   42","line":"  if [ \"$image_name\" = archlinux ] && [ \"$(uname -m)\" = arm64 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   43","line":"    image_name_arg=docker.io/ogarcia/archlinux","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   44","line":"    # base, base-devel"},
{"lineNum":"   45","line":"  elif [ \"$image_name\" = termux ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   46","line":"    image_name_arg=docker.io/termux/termux-docker","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   47","line":"    # aarch64, arm, i686 (latest), x86_64"},
{"lineNum":"   48","line":"    if [ \"$(uname -m)\" = arm64 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   49","line":"      image_version_arg=aarch64","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   50","line":"    else"},
{"lineNum":"   51","line":"      image_version_arg=x86_64","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   52","line":"    fi"},
{"lineNum":"   53","line":"    # prefix=/data/data/com.termux/files/home"},
{"lineNum":"   54","line":"    # user=a0_test"},
{"lineNum":"   55","line":"    # TODO: prefix bootstrap only for termux in docker"},
{"lineNum":"   56","line":"  fi"},
{"lineNum":"   57","line":""},
{"lineNum":"   58","line":"  # case \"$image_name\" in"},
{"lineNum":"   59","line":"  # *) ;;"},
{"lineNum":"   60","line":"  # esac"},
{"lineNum":"   61","line":""},
{"lineNum":"   62","line":"  # container_user=test"},
{"lineNum":"   63","line":"  user=\"test\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   64","line":"  home=\"/home/$user\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   65","line":"  if [ \"$image_name\" = termux ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   66","line":"    prefix=/data/data/com.termux/files","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   67","line":"    home=\"$prefix/home\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   68","line":"    # container_user=root"},
{"lineNum":"   69","line":"    user=root # a0_test","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   70","line":"  fi"},
{"lineNum":"   71","line":"  chezmoi_root=\"$home/.local/share/chezmoi\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   72","line":""},
{"lineNum":"   73","line":"  $PROVIDER build . \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   74","line":"    --build-arg=IMAGE_NAME=\"${image_name_arg:-$image_name}\" \\"},
{"lineNum":"   75","line":"    --build-arg=IMAGE_VERSION=\"${image_version_arg:-$image_version}\" \\"},
{"lineNum":"   76","line":"    --tag=\"$container\""},
{"lineNum":"   77","line":"  # --build-arg=USER=\"$user\""},
{"lineNum":"   78","line":""},
{"lineNum":"   79","line":"  # $PROVIDER run -it --name=\"$container\" --rm \"$container\" \"$@\""},
{"lineNum":"   80","line":"  # --userns=keep-id"},
{"lineNum":"   81","line":"  # --volume=\"$PWD:$chezmoi_root:ro\""},
{"lineNum":"   82","line":""},
{"lineNum":"   83","line":"  # # Stop running container"},
{"lineNum":"   84","line":"  # if [ \"$(container_status \"$container\")\" = running ]; then"},
{"lineNum":"   85","line":"  #   $PROVIDER stop \"$container\""},
{"lineNum":"   86","line":"  # fi"},
{"lineNum":"   87","line":""},
{"lineNum":"   88","line":"  # # Remove existing container"},
{"lineNum":"   89","line":"  # if $PROVIDER container inspect \"$container\" >/dev/null; then"},
{"lineNum":"   90","line":"  #   $PROVIDER container rm \"$container\""},
{"lineNum":"   91","line":"  # fi"},
{"lineNum":"   92","line":""},
{"lineNum":"   93","line":"  # Create container"},
{"lineNum":"   94","line":"  if ! $PROVIDER container inspect \"$container\" >/dev/null; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   95","line":"    $PROVIDER create --name=\"$container\" \"$container\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   96","line":"  fi"},
{"lineNum":"   97","line":""},
{"lineNum":"   98","line":"  # Start container"},
{"lineNum":"   99","line":"  if [ \"$(container_status \"$container\")\" != running ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  100","line":"    $PROVIDER start \"$container\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  101","line":"  fi"},
{"lineNum":"  102","line":""},
{"lineNum":"  103","line":"  # $PROVIDER wait \"$container\""},
{"lineNum":"  104","line":""},
{"lineNum":"  105","line":"  # Verify container is running"},
{"lineNum":"  106","line":"  status=\"$(container_status \"$container\")\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  107","line":"  if [ \"$status\" != running ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  108","line":"    echo >&2 \"Container $container is not running (status: $status)\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  109","line":"    exit 1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  110","line":"  fi"},
{"lineNum":"  111","line":""},
{"lineNum":"  112","line":"  command=(./script/bootstrap --verbose)","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  113","line":"  if [ \"$image_name\" = termux ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  114","line":"    prefix_command=(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  115","line":"      proot","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  116","line":"      -b \"$prefix/usr/etc/resolv.conf:/etc/resolv.conf\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  117","line":"      -b \"$prefix/usr/etc/tls:/etc/ssl\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  118","line":"    )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  119","line":"    command=(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  120","line":"      \"${prefix_command[@]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  121","line":"      \"${command[@]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  122","line":"    )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  123","line":"    user=system","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  124","line":"    $PROVIDER exec \"$container\" sh -euxc \'ln -sf ${PREFIX}/etc/termux/mirrors/default ${PREFIX}/etc/termux/chosen_mirrors\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  125","line":"    # NOTE: Cannot run \'pkg\' command as root"},
{"lineNum":"  126","line":"    $PROVIDER exec --user=$user \"$container\" sh -euxc \'pkg update --quiet && pkg install --quiet --yes chezmoi proot\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  127","line":"  else"},
{"lineNum":"  128","line":"    # Wait for test user"},
{"lineNum":"  129","line":"    $PROVIDER exec \"$container\" sh -euxc \"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  130","line":"      until id -u $user >/dev/null 2>&1; do","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  131","line":"        echo \'Waiting for $user user to be created...\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  132","line":"        sleep 1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  133","line":"      done"},
{"lineNum":"  134","line":"    \"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  135","line":"  fi"},
{"lineNum":"  136","line":"  $PROVIDER exec \"$container\" mkdir -p \"$chezmoi_root\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  137","line":"  $PROVIDER container cp .chezmoiroot \"$container:$chezmoi_root/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  138","line":"  $PROVIDER container cp .chezmoiversion \"$container:$chezmoi_root/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  139","line":"  $PROVIDER container cp --overwrite home \"$container:$chezmoi_root/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  140","line":"  $PROVIDER container cp script \"$container:$chezmoi_root/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  141","line":"  $PROVIDER container cp test \"$container:$chezmoi_root/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  142","line":"  if [ -d test_support ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  143","line":"    $PROVIDER container cp test_support \"$container:$chezmoi_root/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  144","line":"  fi"},
{"lineNum":"  145","line":"  $PROVIDER exec \"$container\" chown -R $user:$user \"$home\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  146","line":""},
{"lineNum":"  147","line":"  $PROVIDER exec \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  148","line":"    --env=CHEZMOI_UPGRADE=true \\"},
{"lineNum":"  149","line":"    --env=CI=true \\"},
{"lineNum":"  150","line":"    --user=\"$user\" \\"},
{"lineNum":"  151","line":"    --workdir=\"$chezmoi_root\" \\"},
{"lineNum":"  152","line":"    \"$container\" \"${command[@]}\""},
{"lineNum":"  153","line":""},
{"lineNum":"  154","line":"  $PROVIDER exec --user=\"$user\" --workdir=\"$chezmoi_root\" \"$container\" ./script/check","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  155","line":"  $PROVIDER exec --user=\"$user\" --workdir=\"$chezmoi_root\" \"$container\" ./script/update","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  156","line":"  $PROVIDER exec --tty --user=\"$user\" --workdir=\"$chezmoi_root\" \"$container\" ./script/test","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  157","line":""},
{"lineNum":"  158","line":"  if [ $# -eq 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  159","line":"    # FIXME: override temporary directory to avoid permission issues in termux"},
{"lineNum":"  160","line":"    if [ \"$image_name\" = termux ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  161","line":"      set -- bash --version","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  162","line":"    else"},
{"lineNum":"  163","line":"      set -- bash -ic \"chezmoi package diff all\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  164","line":"    fi"},
{"lineNum":"  165","line":"  fi"},
{"lineNum":"  166","line":"  $PROVIDER exec \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  167","line":"    --interactive \\"},
{"lineNum":"  168","line":"    --tty \\"},
{"lineNum":"  169","line":"    --user=\"$user\" \\"},
{"lineNum":"  170","line":"    --workdir=\"$chezmoi_root\" \\"},
{"lineNum":"  171","line":"    \"$container\" \"$@\""},
{"lineNum":"  172","line":"  # $PROVIDER stop \"$container\""},
{"lineNum":"  173","line":"}"},
{"lineNum":"  174","line":""},
{"lineNum":"  175","line":"if [ \"$NAME\" = all ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  176","line":"  NAME=alpine,archlinux,debian,ubuntu,fedora,termux","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  177","line":"fi"},
{"lineNum":"  178","line":""},
{"lineNum":"  179","line":"for name in ${NAME//,/ }; do","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  180","line":"  time build_container \"$name\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  181","line":"done"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "test", "date" : "2026-01-04 23:50:47", "instrumented" : 80, "covered" : 0,};
var merged_data = [];
