# https://github.com/b3nj5m1n/xdg-ninja/tree/main/programs
# https://github.com/twpayne/dotfiles/blob/master/home/dot_zshrc.tmpl
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_STATE_HOME="$HOME/.local/state"

{{- if .features.ai }}
export CLAUDE_CONFIG_DIR="${CLAUDE_CONFIG_DIR:-$XDG_CONFIG_HOME/claude}"
{{- end }}

{{- if lookPath "curl" | isExecutable }}
export CURL_HOME="${CURL_HOME:-$XDG_CONFIG_HOME/curl}"
{{- end }}

{{- if .features.docker }}
export DOCKER_CONFIG="${DOCKER_CONFIG:-$XDG_CONFIG_HOME/docker}"
{{- end }}

{{- if lookPath "eza" | isExecutable }}
export EZA_CONFIG_DIR="${EZA_CONFIG_DIR:-$XDG_CONFIG_HOME/eza}"
{{- end }}

{{- if .features.kube }}
export KUBECONFIG="${KUBECONFIG:-$HOME/.kube/config}"
# export KUBECONFIG="${KUBECONFIG:-$XDG_CONFIG_HOME/kube/config.yaml}"
export KUBERC="${KUBERC:-$XDG_CONFIG_HOME/kube/kuberc.yaml}"
export KREW_ROOT="${KREW_ROOT:-$HOME/.krew}"
# export KREW_ROOT="$HOME/.local/share/krew" # /usr/local/krew
# TODO: $XDG_CONFIG_HOME/talos/config
export TALOSCONFIG="${TALOSCONFIG:-$HOME/.talos/config}"
{{- end }}

{{- if lookPath "less" | isExecutable }}
export LESSHISTFILE="${LESSHISTFILE:-$XDG_STATE_HOME/lesshst}"
# TODO: move to global env
export LESSSECURE=1
# LESSSECURE_ALLOW=edit,examine,glob,history,lesskey,lessopen,logfile,osc8,pipe,shell,stop,tags
export LESSSECURE_ALLOW=edit,examine,glob,osc8,pipe,shell,stop,tags
# unset LESSOPEN LESSPIPE
{{- end }}

{{- if .features.git }}
export LG_CONFIG_FILE="$XDG_CONFIG_HOME/lazygit/theme.yml,$XDG_CONFIG_HOME/lazygit/config.yml"
{{- end }}

{{- if lookPath "gpg" | isExecutable }}
# TODO: export GNUPGHOME="$XDG_DATA_HOME/gnupg"
{{- end }}

{{- if .features.go }}
# export GO111MODULE=auto # on
# export GOBIN=$HOME/.local/bin
export GOPATH="$XDG_DATA_HOME/go"
# export GOROOT="$HOME/go"
{{- end }}
export INPUTRC="${INPUTRC:-$XDG_CONFIG_HOME/readline/inputrc}"

{{- if .features.node }}
export NPM_CONFIG_USERCONFIG="${NPM_CONFIG_USERCONFIG:-$XDG_CONFIG_HOME/npm/npmrc}"
export PNPM_HOME="${PNPM_HOME:-$XDG_DATA_HOME/pnpm}"
if ! [ -d "$PNPM_HOME" ]; then
  echo >&2 "Creating: $PNPM_HOME"
  mkdir -p "$PNPM_HOME"
fi
export npm_config_prefix="${npm_config_prefix:-$XDG_DATA_HOME/npm}"
if ! [ -d "$npm_config_prefix" ]; then
  echo >&2 "Creating: $npm_config_prefix"
  mkdir -p "$npm_config_prefix"
fi
{{- end }}

{{- if .features.ruby }}
# ruby_version="${ruby_version:-3.4.0}"
# export GEM_HOME=/usr/lib/ruby/gems/$ruby_version # gem environment home
# export GEM_PATH= # gem environment path
export GEM_SPEC_CACHE="${GEM_SPEC_CACHE:-$XDG_CACHE_HOME/gem}"
# export GEM_USER_HOME="$XDG_DATA_HOME/gem/ruby/$ruby_version" # gem environment user_gemhome
{{- end }}

{{- if .features.rust }}
export CARGO_HOME="$XDG_DATA_HOME/cargo"
export RUSTUP_HOME="$XDG_DATA_HOME/rustup"
{{- end }}

{{- if lookPath "starship" | isExecutable }}
export STARSHIP_CONFIG="$XDG_CONFIG_HOME/starship/starship.toml"
{{- end }}

{{- if and .features.sql (lookPath "psql" | isExecutable) }}
export PSQLRC="$XDG_CONFIG_HOME/psql/psqlrc"
{{- end }}

{{- if lookPath "rg" | isExecutable }}
export RIPGREP_CONFIG_PATH="$XDG_CONFIG_HOME/ripgrep/config"
{{- end }}

{{- if lookPath "wget" | isExecutable }}
export WGETRC="$XDG_CONFIG_HOME/wget/wgetrc"
{{- end }}
# export ZDOTDIR="$XDG_CONFIG_HOME/zsh"

{{- if lookPath "xauth" | isExecutable }}
# export XAUTHORITY="$XDG_RUNTIME_DIR/Xauthority"
{{- end }}
