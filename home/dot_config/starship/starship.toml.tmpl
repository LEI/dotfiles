{{- $config := includeTemplate "dot_config/starship/.starship.yaml" . | fromYaml -}}

{{- if lookPath "starship" | isExecutable -}}
{{- $preset := dict
  "font" "nerd-font-symbols"
  "text" "no-nerd-font"
  | get .preset | default "plain-text-symbols" -}}
{{ $config = output "starship" "preset" $preset | fromToml | merge $config }}
{{- end -}}

{{- $character := dict
  "error_symbol" (printf "[%s](bold red)" (.symbols.error | trim))
  "success_symbol" (printf "[%s](bold green)" (.symbols.prompt | trim))
  "vimcmd_symbol" (printf "[%s](bold green)" "<")
-}}
{{ $_ := $config | set "character" ($config | get "character" | default dict | merge $character) }}

{{ $config | toToml }}
