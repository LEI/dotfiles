{{ $sandboxEnabled := false -}}
{{- /* $model := "sonnet[1m]" */ -}}
{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1",
    "CLAUDE_CODE_ENABLE_TELEMETRY": "1",
    "OTEL_METRICS_EXPORTER": "otlp",
    "OTEL_LOGS_EXPORTER": "otlp",
    "OTEL_EXPORTER_OTLP_PROTOCOL": "grpc",
    "OTEL_EXPORTER_OTLP_ENDPOINT": "http://localhost:4317",
    "OTEL_LOG_USER_PROMPTS": "1",
    "OTEL_LOG_TOOL_DETAILS": "1"
  },
  "permissions": {
    "allow": [
      "Bash(awk *)",
      "Bash(basename *)",
      "Bash(cat *)",
      "Bash(column *)",
      "Bash(cut *)",
      "Bash(date *)",
      "Bash(date)",
      "Bash(diff *)",
      "Bash(dirname *)",
      "Bash(echo *)",
      "Bash(fd *)",
      "Bash(file *)",
      "Bash(find *)",
      "Bash(gh api *)",
      "Bash(gh issue list *)",
      "Bash(gh issue status *)",
      "Bash(gh issue view *)",
      "Bash(gh pr checks *)",
      "Bash(gh pr diff *)",
      "Bash(gh pr list *)",
      "Bash(gh pr status *)",
      "Bash(gh pr view *)",
      "Bash(gh release list *)",
      "Bash(gh release view *)",
      "Bash(gh repo view *)",
      "Bash(gh run list *)",
      "Bash(gh run view *)",
      "Bash(gh search *)",
      "Bash(git diff *)",
      "Bash(git diff)",
      "Bash(git fetch *)",
      "Bash(git log *)",
      "Bash(git remote -v *)",
      "Bash(git remote -v)",
      "Bash(git show *)",
      "Bash(git stash list *)",
      "Bash(git status *)",
      "Bash(git status)",
      "Bash(git worktree list *)",
      "Bash(glab api *)",
      "Bash(glab ci list *)",
      "Bash(glab ci status *)",
      "Bash(glab ci view *)",
      "Bash(glab issue list *)",
      "Bash(glab issue view *)",
      "Bash(glab mr diff *)",
      "Bash(glab mr list *)",
      "Bash(glab mr view *)",
      "Bash(glab repo view *)",
      "Bash(grep *)",
      "Bash(head *)",
      "Bash(jq *)",
      "Bash(ls *)",
      "Bash(pwd)",
      "Bash(realpath *)",
      "Bash(rg *)",
      "Bash(sed *)",
      "Bash(sleep *)",
      "Bash(sort *)",
      "Bash(sq *)",
      "Bash(stat *)",
      "Bash(tail *)",
      "Bash(test *)",
      "Bash(tr *)",
      "Bash(uniq *)",
      "Bash(wc *)",
      "Bash(which *)",
      "Glob",
      "Grep",
      "NotebookRead",
      "Read",
      "Task",
      "TodoWrite",
      "WebFetch(domain:api.github.com)",
      "WebFetch(domain:docs.gitlab.com)",
      "WebFetch(domain:gist.github.com)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:gitlab.com)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebSearch"
    ],
    "deny": [
      "Edit(./**/.env)",
      "Edit(./**/.env.*)",
      "Edit(./secrets/**)",
      "Read(./**/.env)",
      "Read(./**/.env.*)",
      "Read(./secrets/**)",
      "Read(~/.ssh/**)",
      "Write(~/.ssh/**)",
      "Edit(~/.ssh/**)",
      "Read(**/*.key)",
      "Write(**/*.key)",
      "Edit(**/*.key)",
      "Read(**/*.pem)",
      "Write(**/*.pem)",
      "Edit(**/*.pem)",
      "Read(**/*.pfx)",
      "Write(**/*.pfx)",
      "Edit(**/*.pfx)",
      "Write(./**/.env)",
      "Write(./**/.env.*)",
      "Write(./secrets/**)"
    ],
    "ask": [
      "Bash(find -delete*)",
      "Bash(find -exec*)",
      "Bash(find -execdir*)",
      "Bash(find -ok*)",
      "Bash(find -okdir*)",
      "Bash(sed -I*)",
      "Bash(sed -i*)",
      "Edit",
      "MultiEdit",
      "NotebookEdit",
      "Write"
    ],
    "defaultMode": "default",
    "disableBypassPermissionsMode": "disable"
  },
  "enableAllProjectMcpServers": false,
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "{{ .chezmoi.homeDir }}/.claude/hooks/lint.sh"
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "{{ lookPath "node" }} ~/.config/claude/plugins/cache/claude-dashboard/claude-dashboard/1.10.0/dist/index.js"
  },
  "enabledPlugins": {
    {{- $plugins := env "CLAUDE_CODE_PLUGINS" | splitList "," }}
    {{- range $plugins }}
    {{ . | quote }}: true,
    {{- end }}
    "claude-code-setup@claude-plugins-official": true,
    "claude-dashboard@claude-dashboard": true,
    "code-review@claude-plugins-official": true,
    "code-simplifier@claude-plugins-official": true,
    "context7@claude-plugins-official": true,
    "feature-dev@claude-plugins-official": true,
    "php-lsp@claude-plugins-official": true,
    "security-guidance@claude-plugins-official": true,
    "typescript-lsp@claude-plugins-official": true,
    "frontend-design@claude-plugins-official": true,
    "superpowers@claude-plugins-official": true
  },
  "sandbox": {
    "enabled": {{ $sandboxEnabled }},
    "autoAllowBashIfSandboxed": true,
    "allowUnsandboxedCommands": false,
    "network": {
      "allowedDomains": [
        "*.github.com",
        "*.githubusercontent.com",
        "*.gitlab.com",
        "*.npmjs.org",
        "registry.yarnpkg.com",
        "{{ env "GITLAB_HOST" | default "gitlab.com" }}"
      ]
    }
  },
  "alwaysThinkingEnabled": false,
  "autoUpdates": false
}
