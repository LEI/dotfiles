{{- /* chezmoi:modify-template */ -}}
{{- $pinentryProgram := eq .os "darwin" | ternary
  (or (lookPath "pinentry-touchid") (lookPath "pinentry-mac"))
  (lookPath "pinentry-gnome3")
-}}
{{- /* TODO: replace line in file and check ~/.gnupg/gpg.conf contains "use-agent" */ -}}
{{- includeTemplate "block-in-file.tmpl" (dict
  "chezmoi" .chezmoi
  "contents" (printf "pinentry-program %s\n" $pinentryProgram)
) -}}
